function readWithCORS(){var e=new XMLHttpRequest,t=document.getElementById("inputRemote").value;"withCredentials"in e&&(e.open("GET","http://astarte.csr.unibo.it/gapdata/"+t,!0),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<400?(jInstance=JSON.parse(e.responseText),setInstance(jInstance)):alert("reading error"))},e.send())}function loadLocalFile(){var e,t,n;return"function"!=typeof window.FileReader?void alert("The file API isn't supported on this browser yet."):(e=document.getElementById("inputLocal"),void(e?e.files?e.files[0]?(t=e.files[0],n=new FileReader,n.onload=receivedText,n.readAsText(t)):alert("Please select a file before clicking 'Load'"):alert("This browser doesn't seem to support the `files` property of file inputs."):alert("Couldn't find the fileinput element.")))}function receivedText(e){istanza=e.target.result,jInstance=JSON.parse(istanza),setInstance(jInstance)}function setInstance(e){n=e.numcustomers,m=e.numfacilities,c=e.cost,req=e.req,cap=e.cap,alert("Got instance "+e.name+" n="+n)}function checkSol(e){var t,r=0,a=new Array(m);for(i=0;i<m;i++)a[i]=0;for(t=0;t<n;t++){if(e[t]<0||e[t]>=m||void 0===e[t])return r=Number.MAX_VALUE;r+=c[e[t]][t]}for(t=0;t<n;t++)if(a[e[t]]+=req[e[t]][t],a[e[t]]>cap[e[t]])return r=Number.MAX_VALUE;return r}function fixSol(e){var t,r,a,i,o=-1,s=new Array(m),u=new Array(n);for(t=0;t<m;t++)s[t]=cap[t];for(t=0;t<n;t++)u[t]=e[t];for(r=0;r<n;r++)u[r]>=0&&s[u[r]]>=req[u[r]][r]?s[u[r]]-=req[u[r]][r]:u[r]=-1;for(a=0,r=0;r<n;r++)if(u[r]>=0)a+=c[u[r]][r];else{for(i=Number.MAX_VALUE,o=-1,t=0;t<m;t++)s[t]>=req[t][r]&&req[t][r]<i&&(i=req[t][r],o=t);if(o<0)return a=Number.MAX_VALUE;u[r]=o,s[o]-=req[o][r],a+=c[o][r]}if(a<zub){for(t=0;t<n;t++)solbest[t]=u[t];zub=a,console.log("[fixSol] -------- zub improved! "+zub)}for(t=0;t<n;t++)e[t]=u[t];return a}